{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Top 10 Countries with Highest GDP Per Capita (US) 2022",
  "title": "Top 10 Countries with Highest GDP Per Capita (US) 2022",
  "width": 300,
  "height": 250,
  "data": {
    "url": "https://raw.githubusercontent.com/jtru0014/3179/main/A2/data/Petrol%20Dataset%20June%2023%202022.csv"
  },
  "background": "mintcream",
  "transform": [
    {"filter": {"field": "GDP Per Capita (USD)", "valid": true}},
    {"window": [{"op": "rank", "as": "rank"}], "sort": [{"field": "GDP Per Capita (USD)", "order": "descending"}]},
    {"filter": {"field": "rank", "lte": 10}}
  ],
  "layer": [
    {
      "params": [{
        "name": "selectc",
        "select": {"type": "point", "fields": ["Country"]},
        "bind": "legend"
      }],
      "mark": {"type": "bar"},
      "encoding": {
        "y": {
          "field": "Country",
          "type": "nominal",
          "axis": {"labelAngle": 0, "labelAlign": "right", "labelBaseline": "middle"},
          "title": null
        },
        "x": {
          "field": "GDP Per Capita (USD)",
          "type": "quantitative",
          "title": "GDP Per Capita (USD)"
        },
        "color": {
          "field": "Country",
          "scale": {"scheme": "category20"}
        },
        "opacity": {
          "condition": {"param": "selectc", "value": 1},
          "value": 0.2
        },
        "tooltip": [
          {"field": "Country", "type": "nominal", "title": "Country"},
          {"field": "GDP Per Capita (USD)", "type": "quantitative", "title": "GDP Per Capita (USD)"}
        ]
      }
    },
    {
      "mark": {"type": "text", "align": "left", "baseline": "middle", "dx": 5},
      "encoding": {
        "text": {"field": "GDP Per Capita (USD)", "type": "quantitative", "format": ",.0f"},
        "color": {"value": "black"},
        "x": {"aggregate": "max", "field": "GDP Per Capita (USD)"},
        "y": {"field": "Country", "type": "nominal"}
      }
    }
  ]
}
